"use strict";(()=>{var A="scriptsLoaded";window.addEventListener(A,()=>{L()});function L(){let E=()=>{let t=document.createElement("canvas");t.id="reviews-hearts-bg-canvas",t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.pointerEvents="none",t.style.zIndex="1";let e=document.createElement("canvas");return e.id="reviews-hearts-fg-canvas",e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.pointerEvents="none",e.style.zIndex="1000",document.body.appendChild(t),document.body.appendChild(e),{bgCanvas:t,fgCanvas:e}},p=document.querySelector("#reviews-hearts-bg-canvas"),f=document.querySelector("#reviews-hearts-fg-canvas"),{bgCanvas:s,fgCanvas:r}=p&&f?{bgCanvas:p,fgCanvas:f}:E();s.width=window.innerWidth,s.height=window.innerHeight,r.width=window.innerWidth,r.height=window.innerHeight;let y=s.getContext("2d"),m=r.getContext("2d"),g=["\u{1F497}","\u{1F496}","\u2764\uFE0F","\u{1FA77}"],v;(i=>(i[i.BACKGROUND=0]="BACKGROUND",i[i.FOREGROUND=1]="FOREGROUND"))(v||(v={}));class C{constructor(e){this.initialX=Math.random()*window.innerWidth,this.x=this.initialX,this.y=window.innerHeight+Math.random()*100+50;let i=Math.random();e!==void 0?(this.layer=e,this.layer===0?Math.random()<.7?this.size=30:this.size=45:Math.random()<.7?this.size=60:this.size=80):i<.5?(this.size=30,this.layer=0):i<.8?(this.size=45,this.layer=0):i<.95?(this.size=60,this.layer=1):(this.size=80,this.layer=1),this.size===30?(this.speedY=1.4,this.initialOpacity=.5):this.size===45?(this.speedY=2.3,this.initialOpacity=.7):this.size===60?(this.speedY=3.8,this.initialOpacity=.85):(this.speedY=5.2,this.initialOpacity=1),this.emoji=g[Math.floor(Math.random()*g.length)],this.opacity=this.initialOpacity}update(){if(this.y-=this.speedY,this.y<window.innerHeight*.9){let e=1-(window.innerHeight*.9-this.y)/(window.innerHeight*.9),i=Math.pow(e,5);this.opacity=this.initialOpacity*Math.max(0,i)}return this.y>-this.size&&this.opacity>.01}draw(){if(this.opacity<=.01)return;let e=this.layer===0?y:m;e.save(),e.globalAlpha=this.opacity,e.font=`${this.size}px Arial`,e.textAlign="center",e.textBaseline="middle",e.fillText(this.emoji,this.x,this.y),e.restore()}}let l=[],h=[];function d(t){t===0?l.push(new C(0)):h.push(new C(1))}function H(){Math.random()<7/20&&d(0),Math.random()<3/20&&d(1)}let O=0,n;function c(t){if(t-O>16){O=t,y.clearRect(0,0,s.width,s.height),m.clearRect(0,0,r.width,r.height);for(let i=l.length-1;i>=0;i--){let o=l[i];o.update()?o.draw():l.splice(i,1)}for(let i=h.length-1;i>=0;i--){let o=h[i];o.update()?o.draw():h.splice(i,1)}}n=requestAnimationFrame(c)}let w=!1,R,a;function u(){if(!a){for(let t=0;t<7;t++)d(0);for(let t=0;t<3;t++)d(1);a=window.setInterval(H,50),n||(n=requestAnimationFrame(c))}}function b(){a&&(window.clearInterval(a),a=0)}window.addEventListener("scroll",()=>{w||(w=!0,u()),clearTimeout(R),R=window.setTimeout(()=>{w=!1,b()},500)},{passive:!0}),n=requestAnimationFrame(c),window.addEventListener("resize",()=>{s.width=window.innerWidth,s.height=window.innerHeight,r.width=window.innerWidth,r.height=window.innerHeight}),document.addEventListener("visibilitychange",()=>{document.hidden?(a&&(clearInterval(a),a=0),n&&(cancelAnimationFrame(n),n=0)):w&&(u(),n||(n=requestAnimationFrame(c)))}),window.stopHeartsAnimation=()=>(b(),n&&(cancelAnimationFrame(n),n=0),!0),window.startHeartsAnimation=()=>(u(),!0)}})();
