"use strict";(()=>{function _(o,e="body",t=!0,n=void 0){return new Promise((i,d)=>{let s=o.startsWith("https://")?o:window.SCRIPT_BASE+o;if(document.querySelector(`script[src="${s}"]`)){i();return}let r=document.createElement("script");r.src=s,t&&(r.defer=!0),r.addEventListener("load",()=>{if(n){let c=new CustomEvent(`scriptLoaded:${n}`,{detail:{finalUrl:s,scriptName:n}});document.dispatchEvent(c)}i()}),r.addEventListener("error",c=>{d(new Error(`Failed to load script: ${s}`))}),e==="head"?document.head.appendChild(r):e==="body"?document.body.appendChild(r):d(new Error('Invalid script placement. Use "head" or "body".'))})}window.loadExternalScript=_;var l="scriptsLoaded";var a="IS_DEBUG_MODE";window.IS_DEBUG_MODE=I();window.DEBUG=function(...o){window.IS_DEBUG_MODE&&console.debug(...o)};window.setDebugMode=o=>{localStorage.setItem(a,o.toString())};function I(){let o=localStorage.getItem(a);return!!(o&&o==="true")}var S="jsEnv";window.SCRIPTS_ENV=C();window.setScriptsENV=o=>{if(o!=="dev"&&o!=="prod"){console.error("Invalid environment. Pass `dev` or `prod`");return}localStorage.setItem(S,o),window.SCRIPTS_ENV=o,console.debug(`Environment successfully set to ${o}`)};function C(){return localStorage.getItem(S)||"prod"}var p="http://localhost:3000/";function E(o=""){return`https://cdn.jsdelivr.net/gh/igniteagency/igniteagency-webflow-site${o===""?"":`@${o}`}/dist/prod/`}var m=window.location.hostname.includes("webflow.io")?E("dev"):E();window.SCRIPT_BASE=window.SCRIPTS_ENV==="dev"?p:m;window.JS_SCRIPTS=new Set;var w=[];window.addEventListener("DOMContentLoaded",f);function f(){console.debug(`Current mode: ${window.SCRIPTS_ENV}`),window.SCRIPTS_ENV==="dev"?T():u()}function u(){var o;(o=window.JS_SCRIPTS)==null||o.forEach(e=>{let t=document.createElement("script");t.src=window.SCRIPT_BASE+e,t.defer=!0;let n=new Promise((i,d)=>{t.onload=i,t.onerror=()=>{console.error(`Failed to load script: ${e}`)}});w.push(n),document.body.appendChild(t)}),Promise.allSettled(w).then(()=>{window.DEBUG("All scripts loaded"),window.dispatchEvent(new CustomEvent(l))})}function T(){let e=new AbortController,t=setTimeout(()=>{e.abort()},300);fetch(p,{signal:e.signal}).then(n=>{if(!n.ok)throw console.error({response:n}),new Error("localhost response not ok")}).catch(()=>{console.error("localhost not resolved. Switching to production"),window.setScriptsENV("prod")}).finally(()=>{clearTimeout(t),u()})}})();
