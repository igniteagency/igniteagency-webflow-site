"use strict";(()=>{var r=Object.defineProperty;var o=(s,e,i)=>e in s?r(s,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[e]=i;var t=(s,e,i)=>(o(s,typeof e!="symbol"?e+"":e,i),i);var a=class a{constructor(){t(this,"navbar");t(this,"navWrap");t(this,"menu");t(this,"overlay");t(this,"bgPanels");t(this,"menuToggles");t(this,"menuLinks");t(this,"fadeTargets");t(this,"menuButton");t(this,"menuButtonTexts");t(this,"bolt");t(this,"focusableElements");t(this,"timeline");t(this,"state");t(this,"body");t(this,"lenis");t(this,"colorTriggers");t(this,"ANIMATION_DURATION",.5);t(this,"ANIMATION_EASE","power4.inOut");t(this,"OVERFLOW_HIDDEN_CLASS","overflow-hidden");t(this,"TEXT_COLOR_ALTERNATE_CLASS","text-color-alternate");this.navbar=document.querySelector(".nav_component"),this.navWrap=document.querySelector(".nav"),this.state=this.navWrap.getAttribute("data-nav")||"closed",this.body=document.body,this.lenis=window.lenis,this.colorTriggers=document.querySelectorAll('[data-el="nav-color-change-trigger"]'),this.menu=this.navWrap.querySelector(".menu"),this.overlay=this.navWrap.querySelector(".overlay"),this.bgPanels=this.navWrap.querySelectorAll(".bg-panel"),this.menuToggles=document.querySelectorAll("[data-menu-toggle]"),this.menuLinks=this.navWrap.querySelectorAll(".menu-link, .menu-extras_list-item > .button_component"),this.fadeTargets=this.navWrap.querySelectorAll("[data-menu-fade]"),this.menuButton=document.querySelector(".menu-button"),this.menuButtonTexts=this.menuButton.querySelectorAll("p"),this.bolt=this.navWrap.querySelectorAll(".menu-bolt"),this.focusableElements=this.navWrap.querySelectorAll('a[href], button, input, textarea, select, details, [tabindex]:not([tabindex="-1"])'),this.timeline=gsap.timeline(),CustomEase.create("main","0.65, 0.01, 0.05, 0.99"),gsap.defaults({ease:"main",duration:.7}),this.initMenu(),this.initNavHideShow(),this.initColorTriggers()}static getInstance(){return a.instance||(a.instance=new a),a.instance}isNavOpen(){return this.navWrap.getAttribute("data-nav")==="open"}initNavHideShow(){let e=gsap.quickTo(this.navbar,"yPercent",{duration:this.ANIMATION_DURATION,ease:this.ANIMATION_EASE});ScrollTrigger.create({start:"top top",end:"max",onUpdate:i=>{this.isNavOpen()||(i.direction===1?e(-100):i.direction===-1&&e(0))}})}initColorTriggers(){this.colorTriggers.forEach(e=>{let i=e.firstChild.getAttribute("data-wf--nav-color-trigger-theme-atom--theme");ScrollTrigger.create({trigger:e,start:"top top",invalidateOnRefresh:!0,onEnter:()=>{window.IS_DEBUG_MODE&&console.log("onEnter",e,i),i==="light"?this.toggleNavTextClass(!0):this.toggleNavTextClass(!1)},onLeaveBack:()=>{window.IS_DEBUG_MODE&&console.log("onLeaveBack",e,i),i==="light"?this.toggleNavTextClass(!1):this.toggleNavTextClass(!0)}})})}toggleNavTextClass(e){this.navbar.classList.toggle(this.TEXT_COLOR_ALTERNATE_CLASS,e)}initMenu(){this.state!=="open"&&(this.navWrap.setAttribute("aria-hidden","true"),this.focusableElements.forEach(e=>{e.setAttribute("tabindex","-1")})),this.menuToggles.forEach(e=>{e.addEventListener("click",()=>{if(this.state=this.navWrap.getAttribute("data-nav")||"closed",this.state==="open")this.closeNav(),e.focus();else{this.openNav();let i=this.focusableElements[0];i&&i.focus()}})}),document.addEventListener("keydown",e=>{if(e.key==="Escape"&&this.navWrap.getAttribute("data-nav")==="open"){this.closeNav();let i=this.menuToggles[0];i&&i.focus()}})}openNav(){this.navWrap.setAttribute("data-nav","open"),this.body.classList.add(this.OVERFLOW_HIDDEN_CLASS),this.lenis&&this.lenis.stop(),this.navWrap.setAttribute("aria-hidden","false"),this.focusableElements.forEach(e=>{e.setAttribute("tabindex","0")}),this.timeline.clear().set(this.navWrap,{visibility:"visible",opacity:1}).set(this.menu,{xPercent:0},"<").fromTo(this.menuButtonTexts,{yPercent:0},{yPercent:-100,stagger:.2}).fromTo(this.overlay,{autoAlpha:0},{autoAlpha:1},"<").fromTo(this.bgPanels,{xPercent:101},{xPercent:0,stagger:.12,duration:.575},"<").fromTo(this.menuLinks,{yPercent:140,rotate:10},{yPercent:0,rotate:0,stagger:.05},"<+=0.35").fromTo(this.fadeTargets,{autoAlpha:0,yPercent:50},{autoAlpha:1,yPercent:0,stagger:.04},"<+=0.2").fromTo(this.bolt,{scale:0},{scale:1},"<+=0.2")}closeNav(){this.navWrap.setAttribute("data-nav","closed"),this.body.classList.remove(this.OVERFLOW_HIDDEN_CLASS),this.lenis&&this.lenis.start(),this.navWrap.setAttribute("aria-hidden","true"),this.focusableElements.forEach(e=>{e.setAttribute("tabindex","-1")}),this.timeline.clear().to(this.overlay,{autoAlpha:0}).to(this.menu,{xPercent:120},"<").to(this.menuButtonTexts,{yPercent:0},"<").set(this.navWrap,{visibility:"hidden",opacity:0})}};t(a,"instance",null);var n=a;function u(){n.getInstance()}})();
