"use strict";(()=>{var i=class i{constructor(){this.ANIMATION_DURATION=.5;this.ANIMATION_EASE="power4.inOut";this.OVERFLOW_HIDDEN_CLASS="overflow-hidden";this.TEXT_COLOR_ALTERNATE_CLASS="text-color-alternate";this.navbar=document.querySelector(".nav_component"),this.navWrap=document.querySelector(".nav"),this.state=this.navWrap.getAttribute("data-nav")||"closed",this.body=document.body,this.lenis=window.lenis,this.colorTriggers=document.querySelectorAll('[data-el="nav-color-change-trigger"]'),this.menu=this.navWrap.querySelector(".menu"),this.overlay=this.navWrap.querySelector(".overlay"),this.bgPanels=this.navWrap.querySelectorAll(".bg-panel"),this.menuToggles=document.querySelectorAll("[data-menu-toggle]"),this.menuLinks=this.navWrap.querySelectorAll(".menu-link, .menu-extras_list-item > .button_component"),this.fadeTargets=this.navWrap.querySelectorAll("[data-menu-fade]"),this.menuButton=document.querySelector(".menu-button"),this.menuButtonTexts=this.menuButton.querySelectorAll("p"),this.bolt=this.navWrap.querySelectorAll(".menu-bolt"),this.focusableElements=this.navWrap.querySelectorAll('a[href], button, input, textarea, select, details, [tabindex]:not([tabindex="-1"])'),this.timeline=gsap.timeline(),CustomEase.create("main","0.65, 0.01, 0.05, 0.99"),gsap.defaults({ease:"main",duration:.7}),this.initMenu(),this.initNavHideShow(),this.initColorTriggers()}static getInstance(){return i.instance||(i.instance=new i),i.instance}isNavOpen(){return this.navWrap.getAttribute("data-nav")==="open"}initNavHideShow(){let e=gsap.quickTo(this.navbar,"yPercent",{duration:this.ANIMATION_DURATION,ease:this.ANIMATION_EASE});ScrollTrigger.create({start:"top top",end:"max",onUpdate:t=>{this.isNavOpen()||(t.direction===1?e(-100):t.direction===-1&&e(0))}})}initColorTriggers(){this.colorTriggers.forEach(e=>{let t=e.firstChild.getAttribute("data-wf--nav-color-trigger-theme-atom--theme");ScrollTrigger.create({trigger:e,start:"top top",invalidateOnRefresh:!0,onEnter:()=>{window.IS_DEBUG_MODE&&console.log("onEnter",e,t),t==="light"?this.toggleNavTextClass(!0):this.toggleNavTextClass(!1)},onLeaveBack:()=>{window.IS_DEBUG_MODE&&console.log("onLeaveBack",e,t),t==="light"?this.toggleNavTextClass(!1):this.toggleNavTextClass(!0)}})})}toggleNavTextClass(e){this.navbar.classList.toggle(this.TEXT_COLOR_ALTERNATE_CLASS,e)}initMenu(){this.state!=="open"&&(this.navWrap.setAttribute("aria-hidden","true"),this.focusableElements.forEach(e=>{e.setAttribute("tabindex","-1")})),this.menuToggles.forEach(e=>{e.addEventListener("click",()=>{if(this.state=this.navWrap.getAttribute("data-nav")||"closed",this.state==="open")this.closeNav(),e.focus();else{this.openNav();let t=this.focusableElements[0];t&&t.focus()}})}),document.addEventListener("keydown",e=>{if(e.key==="Escape"&&this.navWrap.getAttribute("data-nav")==="open"){this.closeNav();let t=this.menuToggles[0];t&&t.focus()}})}openNav(){this.navWrap.setAttribute("data-nav","open"),this.body.classList.add(this.OVERFLOW_HIDDEN_CLASS),this.lenis&&this.lenis.stop(),this.navWrap.setAttribute("aria-hidden","false"),this.focusableElements.forEach(e=>{e.setAttribute("tabindex","0")}),this.timeline.clear().set(this.navWrap,{visibility:"visible",opacity:1}).set(this.menu,{xPercent:0},"<").fromTo(this.menuButtonTexts,{yPercent:0},{yPercent:-100,stagger:.2}).fromTo(this.overlay,{autoAlpha:0},{autoAlpha:1},"<").fromTo(this.bgPanels,{xPercent:101},{xPercent:0,stagger:.12,duration:.575},"<").fromTo(this.menuLinks,{yPercent:140,rotate:10},{yPercent:0,rotate:0,stagger:.05},"<+=0.35").fromTo(this.fadeTargets,{autoAlpha:0,yPercent:50},{autoAlpha:1,yPercent:0,stagger:.04},"<+=0.2").fromTo(this.bolt,{scale:0},{scale:1},"<+=0.2")}closeNav(){this.navWrap.setAttribute("data-nav","closed"),this.body.classList.remove(this.OVERFLOW_HIDDEN_CLASS),this.lenis&&this.lenis.start(),this.navWrap.setAttribute("aria-hidden","true"),this.focusableElements.forEach(e=>{e.setAttribute("tabindex","-1")}),this.timeline.clear().to(this.overlay,{autoAlpha:0}).to(this.menu,{xPercent:120},"<").to(this.menuButtonTexts,{yPercent:0},"<").set(this.navWrap,{visibility:"hidden",opacity:0})}};i.instance=null;var a=i;function s(){a.getInstance()}})();
