"use strict";(()=>{var T="data-duration",S="data-stagger",v="data-trigger-start",d="data-prev-section-trigger",o={LETTER_STAGGER:"gsap-letter-stagger",LINE_STAGGER:"gsap-line-stagger",SCRUB_TEXT:"data-scrub",HOVER_STAGGER_TRIGGER:"gsap-hover-stagger-trigger",HOVER_STAGGER:"gsap-hover-stagger"},g=class g{constructor(){this.splitInstances=[];this.animations=[];this.elements=[];this.abortController=new AbortController}static getInstance(){return g.instance||(g.instance=new g),g.instance}init(){this.abortController.signal.aborted&&(this.abortController=new AbortController),this.setupAnimations()}setupAnimations(){window.IS_DEBUG_MODE&&console.debug("Setting up text split data attribute animations"),this.setupLetterStagger(),this.setupLineStagger(),this.setupScrubText(),this.setupHoverStagger()}destroy(){this.abortController.abort(),this.clearAnimations()}clearAnimations(){this.animations.forEach(e=>{e.kill()}),this.elements.forEach(e=>{var t;(t=e.animation)==null||t.kill()}),this.splitInstances.forEach(e=>{e.revert()}),this.animations=[],this.elements=[],this.splitInstances=[]}getPreviousSection(e){let t=e.closest("section");return t?t.previousElementSibling:null}setupLetterStagger(){document.querySelectorAll(`[${o.LETTER_STAGGER}]`).forEach(e=>{let t=this.getStaggerAttrValue(e,.03),n=this.getTriggerAttrValue(e,"bottom"),i=e.hasAttribute(d),a=i?this.getPreviousSection(e):null,l=new SplitText(e,{type:"words,lines,chars",mask:"words",autoSplit:!0,onSplit:r=>(gsap.set(r.chars,{y:"100%"}),gsap.to(r.chars,{y:"0%",duration:this.getDurationAttrValue(e,1),ease:"expo.inOut",stagger:t,scrollTrigger:{trigger:a||e,start:i&&a?"bottom bottom":`top ${n}`,invalidateOnRefresh:!0},onComplete:()=>l.revert()}))})})}setupLineStagger(){document.querySelectorAll(`[${o.LINE_STAGGER}]`).forEach(e=>{let t=this.getDurationAttrValue(e,.3),n=this.getTriggerAttrValue(e,"80%"),i=e.hasAttribute(d),a=i?this.getPreviousSection(e):null,l=new SplitText(e,{type:"lines",mask:"lines",onSplit:r=>(gsap.set(r.lines,{y:"100%",opacity:0}),gsap.to(r.lines,{y:"0%",opacity:1,stagger:t,ease:"expo.out",scrollTrigger:{trigger:a||e,start:i&&a?"bottom bottom":`top ${n}`,toggleActions:"play none none none"},onComplete:()=>r.revert()}))})})}setupScrubText(){document.querySelectorAll(`[${o.SCRUB_TEXT}]`).forEach(e=>{let t=new SplitText(e,{type:"chars,words",autoSplit:!0,onSplit:n=>(gsap.set(n.chars,{opacity:.2}),gsap.to(n.chars,{scrollTrigger:{trigger:e,start:"top 60%",end:"bottom 30%",scrub:!0,markers:!1,invalidateOnRefresh:!0},opacity:1,stagger:.1,duration:1}))});this.splitInstances.push(t)})}setupHoverStagger(){if(!window.matchMedia("(min-width: 1100px) and (pointer: fine)").matches){window.IS_DEBUG_MODE&&console.debug("Hover stagger not set up on screens smaller than 1100px or devices with a coarse pointer");return}document.querySelectorAll(`[${o.HOVER_STAGGER}], [${o.HOVER_STAGGER_TRIGGER}]`).forEach(t=>{let n={element:t};if(t.hasAttribute(o.HOVER_STAGGER_TRIGGER)){let i=t.querySelectorAll(`[${o.HOVER_STAGGER}]`);if(i.length===0)return;let a=Array.from(i).map(s=>{let c=this.getDurationAttrValue(s,.8),m=this.getStaggerAttrValue(s,.01),p=new SplitText(s,{type:"words,chars",mask:"words"});this.splitInstances.push(p);let h=gsap.timeline({paused:!0});return h.to(p.chars,{yPercent:-100,duration:c,ease:"expo.inOut",stagger:m}),h}),l=()=>a.forEach(s=>s.play()),r=()=>a.forEach(s=>s.reverse());t.addEventListener("mouseenter",l,{signal:this.abortController.signal}),t.addEventListener("focusin",l,{signal:this.abortController.signal}),t.addEventListener("mouseleave",r,{signal:this.abortController.signal}),t.addEventListener("focusout",r,{signal:this.abortController.signal}),a.forEach(s=>{this.animations.push(s)})}else if(t.hasAttribute(o.HOVER_STAGGER)&&!t.closest(`[${o.HOVER_STAGGER_TRIGGER}]`)){let i=new SplitText(t,{type:"words,chars",mask:"words"});this.splitInstances.push(i);let a=this.getDurationAttrValue(t,.8),l=this.getStaggerAttrValue(t,.01),r=gsap.timeline({paused:!0});r.to(i.chars,{yPercent:-100,duration:a,ease:"expo.inOut",stagger:l}),n.animation=r,this.elements.push(n);let s=()=>r.play(),c=()=>r.reverse();t.addEventListener("mouseenter",s,{signal:this.abortController.signal}),t.addEventListener("focusin",s,{signal:this.abortController.signal}),t.addEventListener("mouseleave",c,{signal:this.abortController.signal}),t.addEventListener("focusout",c,{signal:this.abortController.signal})}})}getDurationAttrValue(e,t){return parseFloat(e.getAttribute(T)||t.toString())}getStaggerAttrValue(e,t){return parseFloat(e.getAttribute(S)||t.toString())}getTriggerAttrValue(e,t){return e.getAttribute(v)||t}};g.instance=null;var u=g;function A(){let E=u.getInstance();document.fonts.ready.then(()=>{E.init()})}})();
