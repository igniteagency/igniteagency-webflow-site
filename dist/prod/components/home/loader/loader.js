"use strict";(()=>{var _=Object.defineProperty;var T=(u,e,t)=>e in u?_(u,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):u[e]=t;var c=(u,e,t)=>(T(u,typeof e!="symbol"?e+"":e,t),t);var E="is-loader-shown";var S="home-loader_component",A="home-loader_number-sub-wrap",C="home-loader_number",y="home-loader_number-wrapper",P="home-loader_center-bolt",L="home-loader_center-bolt-wrap",f="home-loader_center-bolt-path",v="bolt-clone-group",b=class{constructor(){c(this,"loaderElement");c(this,"originalSvg");c(this,"boltContainer");c(this,"originalGroup");c(this,"originalPath");c(this,"duplicates",[]);c(this,"loaderTimeline",null);c(this,"cachedElements",new Map);c(this,"viewportMetrics",null);var e,t;this.loaderElement=document.querySelector(`.${S}`),this.originalSvg=document.querySelector(`.${P}`),this.boltContainer=document.querySelector(`.${L}`),this.originalGroup=((e=this.originalSvg)==null?void 0:e.querySelector("g"))||null,this.originalPath=((t=this.originalSvg)==null?void 0:t.querySelector(`.${f}`))||null,this.cachedElements.set("numberEl",document.querySelector(`.${C}`)),this.cachedElements.set("cursorBackground",document.querySelector(".cursor_background")),this.calculateViewportMetrics()}init(){sessionStorage.getItem(E)==="true"&&this.loaderElement||this.setupLoaderAnimation()}setupLoaderAnimation(){this.loaderTimeline=gsap.timeline({defaults:{duration:2.5,ease:"power4.inOut"},autoRemoveChildren:!0}),this.setupBoltClones(),this.setupNumberAnimation(),this.setupBoltAnimation(),this.setupFinalTransition(),this.loaderTimeline.play(),sessionStorage.setItem(E,"true"),window.IS_DEBUG_MODE&&console.debug("Loader animation initialized and started")}calculateViewportMetrics(){let e=window.innerWidth,t=window.innerHeight,n=Math.sqrt(e*e+t*t);if(this.originalSvg){let o=this.originalSvg.getBoundingClientRect(),i=n/Math.max(o.width,o.height)*33;this.viewportMetrics={width:e,height:t,diagonal:n,baseScale:i}}}setupBoltClones(){if(!this.originalSvg||!this.boltContainer||!this.originalGroup||!this.viewportMetrics)return;let e=25,t=document.createDocumentFragment();for(let o=1;o<=e;o++){let i=this.originalGroup.cloneNode(!0);i.classList.add(v),i.id=`${v}-${o}`,t.appendChild(i),this.duplicates.push(i)}this.originalSvg.appendChild(t);let n=[this.originalGroup,...this.duplicates];gsap.set(this.originalSvg,{transformOrigin:"center center"}),gsap.set(n,{scale:o=>this.viewportMetrics.baseScale+o*.4,rotation:90,transformOrigin:"center center",svgOrigin:"center center"}),this.originalPath&&gsap.set(this.originalPath,{fill:"none",stroke:"black"})}setupNumberAnimation(){if(!this.loaderTimeline)return;let e=this.cachedElements.get("numberEl");if(!e)return;let t=gsap.timeline();{let n={val:0};t.to(n,{val:100,duration:2,onUpdate:()=>{e.textContent=Math.round(n.val).toString()}}).to(`.${A}`,{scale:2,duration:2},"<").to(`.${y}`,{right:0,duration:2},"<").to(`.${A} > *`,{yPercent:200,duration:.8,ease:"power2.inOut"},"+=0.1"),this.loaderTimeline.add(t)}}setupBoltAnimation(){if(!this.loaderTimeline||!this.originalGroup||this.duplicates.length===0)return;let e=[this.originalGroup,...this.duplicates],t=gsap.timeline();t.to(e,{scale:1,rotation:0,duration:1.2,ease:"power4.inOut",transformOrigin:"center center",svgOrigin:"center center",stagger:{amount:.3,from:"start",ease:"power2.in"}}),t.to(`.${v}`,{opacity:1,duration:.15});let n=[this.originalPath];this.duplicates.forEach(s=>{let m=s.querySelector(`.${f}`);m&&n.push(m)});let o=this.cachedElements.get("cursorBackground"),i=o?getComputedStyle(o).backgroundColor:"#ff0000";t.to(e,{scale:1.2,duration:.4},"-=0.2"),t.to(n,{fill:i,stroke:i,duration:.4},"<");let a=this.duplicates.slice(0,4),r=this.duplicates.slice(4,8);this.duplicates.length>8&&t.to(this.duplicates.slice(8),{opacity:0,duration:.2},">"),t.to(a,{yPercent:s=>-63*(s+1),xPercent:s=>-79*(s+1),duration:.8,ease:"power4.out",stagger:{amount:.1,from:"end"}},">"),t.to(r,{yPercent:s=>63*(s+1),xPercent:s=>79*(s+1),duration:.8,ease:"power4.out",stagger:{amount:.1,from:"start"}},"<");let l=[this.originalPath];[...a,...r].forEach(s=>{let m=s.querySelector(`.${f}`);m&&l.push(m)});let g=gsap.timeline(),{width:p,height:h}=this.viewportMetrics,w=h>p?p*1.5:p/2;l.filter(s=>s).map(s=>this.createPathExpandAnimation(s,w,1)).filter(s=>s!==null).forEach(s=>g.add(s,0)),t.add(g,">"),this.loaderTimeline.add(t,"-=1")}createPathExpandAnimation(e,t=10,n=1.2){let o=e.getAttribute("d");if(!o)return null;let i=`path-${e.id||"default"}`,a=this.cachedElements.get(i);a||(a=this.parsePathData(o),this.cachedElements.set(i,a));let r={offset:0},l=Math.floor(a.length/2);return gsap.timeline().to(r,{offset:t,duration:n,ease:"power4.inOut",onUpdate:()=>this.updatePathElement(e,a,r.offset,l,o)})}parsePathData(e){let t=e.match(/[a-zA-Z][^a-zA-Z]*/g)||[],n=[];return t.forEach(o=>{let i=o.charAt(0),a=i===i.toUpperCase(),r=o.substring(1).trim().split(/[\s,]+/).map(parseFloat);switch(i.toUpperCase()){case"M":case"L":for(let l=0;l<r.length;l+=2)n.push({command:i,x:r[l],y:r[l+1],isAbsolute:a});break;case"H":r.forEach(l=>n.push({command:i,x:l,y:0,isAbsolute:a}));break;case"V":r.forEach(l=>n.push({command:i,x:0,y:l,isAbsolute:a}));break;case"Z":n.push({command:i,x:0,y:0,isAbsolute:!0});break}}),n}updatePathElement(e,t,n,o,i){if(n===0){e.setAttribute("d",i);return}let a="";t.forEach((r,l)=>{let p=(l<o?-1:1)*n,h=r.x;r.command.toUpperCase()!=="Z"&&r.command.toUpperCase()!=="V"&&(h=r.x+p);let d=r.command.toUpperCase();d==="M"?a+=`M${h} ${r.y}`:d==="L"?a+=`L${h} ${r.y}`:d==="H"?a+=`H${h}`:d==="V"?a+=`V${r.y}`:d==="Z"&&(a+="Z")}),e.setAttribute("d",a)}setupFinalTransition(){this.loaderTimeline&&this.loaderTimeline.to(`.${S}`,{duration:.5,ease:"power2.inOut",yPercent:-100,onComplete:()=>{let e=document.querySelector(`.${S}`);e&&(e.style.display="none")}},"-=0.2")}getTimeline(){return this.loaderTimeline}},O=new b;O.init();})();
