"use strict";(()=>{function C(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function g(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function p(t,i,e){return i&&g(t.prototype,i),e&&g(t,e),t}function E(t){return+t.replace(/px/,"")}function j(t){var i=window.devicePixelRatio,e=getComputedStyle(t),n=E(e.getPropertyValue("width")),o=E(e.getPropertyValue("height"));t.setAttribute("width",(n*i).toString()),t.setAttribute("height",(o*i).toString())}function u(t,i){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=Math.random()*(i-t)+t;return Math.floor(n*Math.pow(10,e))/Math.pow(10,e)}function _(t){return t[u(0,t.length)]}var O=.00125,R=5e-4,D=9e-4,M=1e-5,F=6,L=80,x=.9,B=1.7,z=.2,U=.6,k=.03,q=.07,y=15,A=82,G=150,H=100,J=250,X=40,W=["#fcf403","#62fc03","#f4fc03","#03e7fc","#03fca5","#a503fc","#fc03ad","#fc03c2"];function N(t){var i=1920;return Math.log(t)/Math.log(i)}var T=function(){function t(i){C(this,t);var e=i.initialPosition,n=i.direction,o=i.confettiRadius,s=i.confettiColors,a=i.emojis,f=i.emojiSize,c=i.canvasWidth,l=u(x,B,3),r=l*N(c);this.confettiSpeed={x:r,y:r},this.finalConfettiSpeedX=u(z,U,3),this.rotationSpeed=a.length?.01:u(k,q,3)*N(c),this.dragForceCoefficient=u(R,D,6),this.radius={x:o,y:o},this.initialRadius=o,this.rotationAngle=n==="left"?u(0,.2,3):u(-.2,0,3),this.emojiSize=f,this.emojiRotationAngle=u(0,2*Math.PI),this.radiusYUpdateDirection="down";var h=n==="left"?u(A,y)*Math.PI/180:u(-y,-A)*Math.PI/180;this.absCos=Math.abs(Math.cos(h)),this.absSin=Math.abs(Math.sin(h));var d=u(-G,0),v={x:e.x+(n==="left"?-d:d)*this.absCos,y:e.y-d*this.absSin};this.currentPosition=Object.assign({},v),this.initialPosition=Object.assign({},v),this.color=a.length?null:_(s),this.emoji=a.length?_(a):null,this.createdAt=new Date().getTime(),this.direction=n}return p(t,[{key:"draw",value:function(e){var n=this.currentPosition,o=this.radius,s=this.color,a=this.emoji,f=this.rotationAngle,c=this.emojiRotationAngle,l=this.emojiSize,r=window.devicePixelRatio;s?(e.fillStyle=s,e.beginPath(),e.ellipse(n.x*r,n.y*r,o.x*r,o.y*r,f,0,2*Math.PI),e.fill()):a&&(e.font="".concat(l,"px serif"),e.save(),e.translate(r*n.x,r*n.y),e.rotate(c),e.textAlign="center",e.fillText(a,0,0),e.restore())}},{key:"updatePosition",value:function(e,n){var o=this.confettiSpeed,s=this.dragForceCoefficient,a=this.finalConfettiSpeedX,f=this.radiusYUpdateDirection,c=this.rotationSpeed,l=this.createdAt,r=this.direction,h=n-l;if(o.x>a&&(this.confettiSpeed.x-=s*e),this.currentPosition.x+=o.x*(r==="left"?-this.absCos:this.absCos)*e,this.currentPosition.y=this.initialPosition.y-o.y*this.absSin*h+O*Math.pow(h,2)/2,this.rotationSpeed-=this.emoji?1e-4:M*e,this.rotationSpeed<0&&(this.rotationSpeed=0),this.emoji){this.emojiRotationAngle+=this.rotationSpeed*e%(2*Math.PI);return}f==="down"?(this.radius.y-=e*c,this.radius.y<=0&&(this.radius.y=0,this.radiusYUpdateDirection="up")):(this.radius.y+=e*c,this.radius.y>=this.initialRadius&&(this.radius.y=this.initialRadius,this.radiusYUpdateDirection="down"))}},{key:"getIsVisibleOnCanvas",value:function(e){return this.currentPosition.y<e+H}}]),t}();function V(){var t=document.createElement("canvas");return t.style.position="fixed",t.style.width="100%",t.style.height="100%",t.style.top="0",t.style.left="0",t.style.zIndex="1000",t.style.pointerEvents="none",document.body.appendChild(t),t}function Y(t){var i=t.confettiRadius,e=i===void 0?F:i,n=t.confettiNumber,o=n===void 0?t.confettiesNumber||(t.emojis?X:J):n,s=t.confettiColors,a=s===void 0?W:s,f=t.emojis,c=f===void 0?t.emojies||[]:f,l=t.emojiSize,r=l===void 0?L:l;return t.emojies&&console.error("emojies argument is deprecated, please use emojis instead"),t.confettiesNumber&&console.error("confettiesNumber argument is deprecated, please use confettiNumber instead"),{confettiRadius:e,confettiNumber:o,confettiColors:a,emojis:c,emojiSize:r}}var $=function(){function t(i){var e=this;C(this,t),this.canvasContext=i,this.shapes=[],this.promise=new Promise(function(n){return e.resolvePromise=n})}return p(t,[{key:"getBatchCompletePromise",value:function(){return this.promise}},{key:"addShapes",value:function(){var e;(e=this.shapes).push.apply(e,arguments)}},{key:"complete",value:function(){var e;return this.shapes.length?!1:((e=this.resolvePromise)===null||e===void 0||e.call(this),!0)}},{key:"processShapes",value:function(e,n,o){var s=this,a=e.timeDelta,f=e.currentTime;this.shapes=this.shapes.filter(function(c){return c.updatePosition(a,f),c.draw(s.canvasContext),o?c.getIsVisibleOnCanvas(n):!0})}}]),t}(),Z=function(){function t(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};C(this,t),this.activeConfettiBatches=[],this.canvas=i.canvas||V(),this.canvasContext=this.canvas.getContext("2d"),this.requestAnimationFrameRequested=!1,this.lastUpdated=new Date().getTime(),this.iterationIndex=0,this.loop=this.loop.bind(this),requestAnimationFrame(this.loop)}return p(t,[{key:"loop",value:function(){this.requestAnimationFrameRequested=!1,j(this.canvas);var e=new Date().getTime(),n=e-this.lastUpdated,o=this.canvas.offsetHeight,s=this.iterationIndex%10===0;this.activeConfettiBatches=this.activeConfettiBatches.filter(function(a){return a.processShapes({timeDelta:n,currentTime:e},o,s),s?!a.complete():!0}),this.iterationIndex++,this.queueAnimationFrameIfNeeded(e)}},{key:"queueAnimationFrameIfNeeded",value:function(e){this.requestAnimationFrameRequested||this.activeConfettiBatches.length<1||(this.requestAnimationFrameRequested=!0,this.lastUpdated=e||new Date().getTime(),requestAnimationFrame(this.loop))}},{key:"addConfetti",value:function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=Y(e),o=n.confettiRadius,s=n.confettiNumber,a=n.confettiColors,f=n.emojis,c=n.emojiSize,l=this.canvas.getBoundingClientRect(),r=l.width,h=l.height,d=h*5/7,v={x:0,y:d},w={x:r,y:d},m=new $(this.canvasContext),S=0;S<s/2;S++){var P=new T({initialPosition:v,direction:"right",confettiRadius:o,confettiColors:a,confettiNumber:s,emojis:f,emojiSize:c,canvasWidth:r}),b=new T({initialPosition:w,direction:"left",confettiRadius:o,confettiColors:a,confettiNumber:s,emojis:f,emojiSize:c,canvasWidth:r});m.addShapes(P,b)}return this.activeConfettiBatches.push(m),this.queueAnimationFrameIfNeeded(),m.getBatchCompletePromise()}},{key:"clearCanvas",value:function(){this.activeConfettiBatches=[]}},{key:"destroyCanvas",value:function(){this.canvas.remove()}}]),t}(),I=Z;function ee(t){let i=typeof t=="string"?document.querySelector(t):t;if(!i)return console.error("Confetti canvas not found:",t),null;let e=null,n=!1,o=()=>{if(!e)try{window.IS_DEBUG_MODE&&console.debug("Initializing JSConfetti on demand for canvas:",i),e=new I({canvas:i})}catch(r){console.error("Error initializing JSConfetti",{error:r},{canvasEl:i});return}e.addConfetti({emojis:["\u{1F60E}","\u26A1\uFE0F","\u{1F389}","\u{1F308}","\u{1F440}","\u{1F984}"],emojiSize:100,confettiNumber:30})},s=()=>{if(!e)try{window.IS_DEBUG_MODE&&console.debug("Initializing JSConfetti proactively for canvas:",i),e=new I({canvas:i})}catch(r){console.error("Error initializing JSConfetti",{error:r},{canvasEl:i});return}n?window.IS_DEBUG_MODE&&console.debug("Confetti listener already active."):(window.IS_DEBUG_MODE&&console.debug("Activating confetti click listener."),i.addEventListener("click",o),n=!0)},a=()=>{n?(window.IS_DEBUG_MODE&&console.debug("Deactivating confetti click listener."),i.removeEventListener("click",o),n=!1):console.log("Confetti listener already inactive.")};return{activate:s,deactivate:a,destroy:()=>{window.IS_DEBUG_MODE&&console.debug("Destroying confetti controller."),a(),e=null},exitEffect:()=>{a()},reenterEffect:()=>{s()}}}})();
